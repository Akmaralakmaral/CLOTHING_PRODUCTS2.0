@model List<CLOTHING_PRODUCTS.Models.ProductManufacturing>

<h2>Create Product Manufacturing</h2>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger" role="alert">
        @TempData["ErrorMessage"]
    </div>
}

@using (Html.BeginForm("Create", "KURSOVAYAProductManufacturing", FormMethod.Post))
{
    <div class="form-group">
        <label for="finishedProductId">Select Finished Product:</label>
        <select class="form-control" name="finishedProductId" id="productId">
            @foreach (var product in ViewBag.FinishedProducts)
            {
                <option value="@product.FinishedProductId">@product.Name</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="employeeId">Select Employee:</label>
        <select class="form-control" name="employeeId" id="employeeId">
            @foreach (var employee in ViewBag.Employees)
            {
                <option value="@employee.EmployeeId">@employee.FullName</option>
            }
        </select>
    </div>

    <div class="form-group">
        <label for="quantity">Quantity:</label>
        <input type="number" class="form-control" name="quantity" id="quantity" value="@ViewBag.Quantity" required>
    </div>

   
    <div class="form-group">
        <label for="date">Date:</label>
        <input type="date" class="form-control" name="date" id="date" value="@(((DateTime)ViewBag.Date).ToString("yyyy-MM-dd"))" required>
    </div>


    <button type="submit" class="btn btn-primary">Create</button>
}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var finishedProductId = @ViewBag.FinishedProductId;
        var selectElement = document.getElementById("productId");

        for (var i = 0; i < selectElement.options.length; i++) {
            if (selectElement.options[i].value == finishedProductId) {
                selectElement.options[i].setAttribute("selected", "selected");
                break;
            }
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        var employeeId = @ViewBag.EmployeeId;
        var selectElement = document.getElementById("employeeId");

        for (var i = 0; i < selectElement.options.length; i++) {
            if (selectElement.options[i].value == employeeId) {
                selectElement.options[i].setAttribute("selected", "selected");
                break;
            }
        }
    });
</script>
